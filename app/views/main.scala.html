@(content: Html)

<!DOCTYPE html>

<html>
    <head>
        <title>Taggy</title>

        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">


        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/twitter-typeahead.css")">
        <link rel="stylesheet" type="text/css" href="@routes.Assets.at("stylesheets/bootstrap-tagsinput.css")" />
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.css")">
        <link rel="stylesheet" type="text/css" href="@routes.Assets.at("stylesheets/bootstrap-editable.css")" />
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap-override.css")">


        <script src="@routes.Assets.at("javascripts/libs/jquery-1.10.2.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/libs/jquery.inputhints.min.js")" type="text/javascript"></script>

        <script src="@routes.Assets.at("javascripts/libs/bootstrap.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/libs/bootstrap-tagsinput.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/libs/bootstrap-editable.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/libs/typeahead.bundle.js")" type="text/javascript"></script>

        <script src="@routes.Assets.at("javascripts/libs/tinymce/tinymce.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/common/utils.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/common/API.js")" type="text/javascript"></script>




        <script src="@routes.Assets.at("javascripts/common/Popup.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/common/Hamburg.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/common/TagsInput.js")" type="text/javascript"></script>

        <script src="@routes.Assets.at("javascripts/note/Payload.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/note/NewPayload.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/note/NewNoteView.js")" type="text/javascript"></script>

        <script src="@routes.Assets.at("javascripts/note/cards/NoteCard.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/note/cards/CardView.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/note/list/ListView.js")" type="text/javascript"></script>

        <script src="@routes.Assets.at("javascripts/filter/NewFilterView.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/filter/FilterSearchTreeView.js")" type="text/javascript"></script>

        <script src="@routes.Assets.at("javascripts/filter/StarredFiltersView.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/filter/FilterView.js")" type="text/javascript"></script>
    </head>
    <body>
        <div>
            <div id="filters" style="float: left"></div>
            <div id="newNote" style="float: right"></div>
            <div style="clear:both"></div>
        </div>

        <hr/>
        <div>
            <div id="hamburger">
                <input id="searchQuery" type="text" placeholder="Search notes" /> <button id="searchButton">?</button>
                <br/>
                <br/>
                All Filters:
                <ul>
                    <li>a</li>
                    <li>a</li>
                    <li>a</li>
                    <li>a</li>
                    <li>a</li>
                    <li>a</li>
                    <li>a</li>
                </ul>

            </div>
            <div id="content" style="float: left; width: 100%; margin-top: 1em">@content</div>
        </div>


        <script type="text/javascript">
            var filtersView = new FiltersView({
                filters: "all",
                appendTo: $("#filters"),
                onFilterChanged: changeFilter
            });

            var filterView = new FilterView({
                appendTo: $("#filter"),
                //view: new ListView()
            });

            $(function() {
                // hook up placeholder text on any input with a placeholder attribute
                $('input[placeholder]').inputHints();

                new Hamburg({
                    object: $("#hamburger"),
                });

                $("#searchButton").on("click", function () {
                    var query = $("#searchQuery").val();
                    searchPayloadsAndTagNames(query, function(matches) {
                        showSearchResults(query, matches);
                    });
                });

                var btn = $("<button>+</button>");
                var newNoteView = new NewNoteView();
                var popup = new Popup(newNoteView, btn, "right");
                $("#newNote").append(btn);

                filtersView.populate();
            });

            function changeFilter(filter) {
                setUrl("?filterId=" + filter.id);
                filterView.setFilter(filter);
            }

            function showSearchResults(query, matches) {
                //setUrl("/search/"+query);
                console.log(matches);

                var tagNames = $("<div></div>");
                tagNames.append("<h3>" + matches.tags.length + " tag(s) matched your query</h3>");
                $.each(matches.tags, function(i, tag) {
                    var tagName = $("<a href='/tag/" +tag.id+ "'></a>");
                    tagName.append(tag.name);

                    tagNames.append(tagName);
                    tagNames.append("<br/>");
                });

                var payloads = $("<div></div>");
                payloads.append("<h3>" + matches.notes.length + " note(s) matched your query</h3>");
                var cv = new CardView();
                cv.showNotes(matches.notes);
                payloads.append(cv.gui);

                var div = $("<div></div>");
                div.append(tagNames);
                div.append(payloads);

                $("#content").empty();
                $("#content").append(div);
            }
        </script>
    </body>
</html>
